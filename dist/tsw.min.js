/**
 * @name Theresa's Sound World
 * @description A JavaScript library for audio manipulation.
 * @version v0.5.2
 * @tutorial http://theresassoundworld.com
 * @author Stuart Memo
 * @license MIT
 */
!function e(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}}},{}],2:[function(e,t,n){"use strict";var r=e("./tsw-core"),o=function(e){var t=Math.floor(e/60);return{minutes:t,seconds:e-60*t,totalSeconds:e}};r.analyser=function(){var e=r.context().createAnalyser();return e},r.info=function(e){return{duration:o(e.duration),numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate}},t.exports=r},{"./tsw-core":4}],3:[function(e,t,n){var r=e("./tsw-main");window.tsw=r},{"./tsw-main":7}],4:[function(e,t,n){"use strict";var r,o=e("./helpers"),i="0.5.2";r=function(){var e=function(e,t){for(var n in t)e[n]=t[n];return e},t=function(e,t){for(var n in t)a(e[n])&&(e[n].value=t[n])},n=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},a=function(e){return"object"==typeof e},c=function(e){return"undefined"!=typeof e},u=function(e){c(e);if(c(e)&&null!==e)return!0},s=function(e){var t=!1;return Object(e)&&"node"in e&&(t=!0),t},f=function(e){return"undefined"!=typeof e.context},p=function(e){return e.hasOwnProperty("input")||e.hasOwnProperty("output")},l=function(e){return!!a(e)&&"setValueAtTime"in e},d=function(e,t,n,r,o){if(u(o))switch(o){case"linear":e[t].setValueAtTime(e[t].value,y.now()),e[t].linearRampToValueAtTime(n,r);break;case"exponential":e[t].setValueAtTime(e[t].value,y.now()),0===n&&(n=1e-8),e[t].exponentialRampToValueAtTime(n,r);break;default:e[t].setValueAtTime(n,r)}else e[t].setValueAtTime(n,r)},h=function(e,t){if(e&&u(e[t]))return u(e[t].value)?e[t].value:e[t]},v=function(e,t,n,r,o){u(e[t].value)?u(r)?d(e,t,n,r,o):e[t].value=n:e[t]=n},m=function(e,t){return function(n,r,o){return u(n)?v(e,t,n,r,o):h(e,t)}},y={},g=[];y.version=i,y.isBrowserSupported=!1,y.processors=[];var w=function(e,t){var n;if("undefined"==typeof webkitAudioContext&&"undefined"==typeof AudioContext){if("function"==typeof webkitAudioContext)"undefined"==typeof webkitAudiocontext().prototype.createGainNode&&t("Sorry, your browser doesn't support a recent enough version of the Web Audio API.");else if("function"==typeof webkitAudiocontext){var r=webkitAudiocontext().prototype;r.createGain=r.createGainNode,r.createDelay=r.createDelayNode,r.createScriptProcessor=r.createJavaScriptNode}}else"function"==typeof AudioContext?(n=new AudioContext,y.context=function(){return n}):(n=new webkitAudioContext,y.context=function(){return n});y.isBrowserSupported=!0,e()},x=function(){"function"==typeof y.context&&(y.speakers=y.context().destination,y.osc=y.oscillator)};y.now=function(){return this.context().currentTime},y.channelSplitter=function(){return y.context().createChannelSplitter()},y.channelMerger=function(e){return y.context().createChannelMerger(e)},y.connect=function(){var e,t=arguments.length,r=function(e,t){e.connectedTo=e.connectedTo||[],e.hasOwnProperty("connectedTo")&&e.connectedTo.push(t)},o=function(){arguments[0].connect(arguments[1],0,arguments[2]),r(arguments[0],arguments[1])},i=function(){arguments[0].connect(arguments[1].input,0,arguments[2]),r(arguments[0],arguments[1])},a=function(){for(var e=0;e<arguments[1].length;e++)y.connect(arguments[0],arguments[1][e])},c=function(){for(var e=0;e<arguments[0].length;e++)y.connect(arguments[0][e],arguments[1])},u=function(){arguments[0].output.connect(arguments[1].input,0,arguments[2]),r(arguments[0],arguments[1])},d=function(){arguments[0].output.connect(arguments[1],0,arguments[2]),r(arguments[0],arguments[1])},h=function(){for(var e=0;e<arguments[1].length;e++)y.connect(arguments[0],arguments[1][e])},v=function(){for(var e=0;e<arguments[0].length;e++)y.connect(arguments[0][e],arguments[1])},m=function(){for(var e=0;e<arguments[0].length;e++)y.connect(arguments[0][e],arguments[1])},g=function(){arguments[0].connect(arguments[1])},w=function(){arguments[0].output.connect(arguments[1])};for(e=0;e<t-1;e++){var x=arguments[e],b=arguments[e+1];if(f(x)&&p(b))i(x,b);else if(p(x)&&f(b))d(x,b);else if(f(x)&&n(b))a(x,b);else if(n(x)&&f(b))c(x,b);else if(f(x)&&f(b))o(x,b);else if(p(x)&&p(b))u(x,b);else if(p(x)&&n(b))h(x,b);else if(n(x)&&p(b))v(x,b);else if(n(x)&&n(b))m(x,b);else if(s(x)&&n(b))connectObjectWithNodeToArray(x,b);else if(n(x)&&s(b))connectArrayToObjectWithNode(x,b);else{if(s(x)&&s(b)){if(f(x.node)&&f(b.node)){o(x.node,b.node,b.channel);continue}if(p(x.node)&&f(b.node)){d(x.node,b.node,b.channel);continue}if(f(x.node)&&p(b.node)){i(x.node,b.node,b.channel);continue}if(p(x.node)&&p(b.node)){u(x.node,b.node,b.channel);continue}}f(x)&&l(b)?g(x,b):p(x)&&l(b)&&w(x,b)}}},y.disconnect=function(){var e,t=arguments.length;for(e=0;e<t;e++)arguments[e].disconnect&&(arguments[e].disconnect(),arguments[e].connectedTo=[]),p(arguments[e])&&(y.disconnect(arguments[e].output),arguments[e].connectedTo=[])},y.disconnectAfterTime=function(e,t){g.push({node:e,time:t})},y.load=function(){var e,t,n={},o=arguments[0],i="",a=[],c=0,u=0,s=0,f=this,p=function(e,t,n,o,i,a){var p=new XMLHttpRequest;p.open("GET",e+n,!0),p.responseType="arraybuffer";var l=function(){c++,f.context().decodeAudioData(p.response,function(e){o[t]=e,Object.keys(o).length===s&&i(o)})},d=function(){u++,r(a)?a():console.log("There was an error loading your file(s)",p.status)};p.onreadystatechange=function(){4===p.readyState&&(200===p.status?l():d())},p.send()};if("object"==typeof arguments[1]?(i=arguments[1].path||"",a=arguments[1].extensions||[]):"function"==typeof arguments[1]&&(e=arguments[1]),"function"==typeof arguments[2]&&(t=arguments[2]),"object"==typeof o){s=Object.keys(o).length;for(var l in o)p(i,l,o[l],n,e,t)}else{if("string"!=typeof o)throw new Error("Files must be an array or a valid string.");s=1}},y.wait=function(e){var t,n=this.context().createDelay();return t=y.createNode(),t.nodeType="wait",t.time=m(n,"delayTime"),t.time(e||1),y.connect(t.input,n,t.output),t},y.createMonoMaker=function(){var e={};return e.input=y.createGain(),e.output=y.createGain(),y.connect(e.input,e.output),e},y.panner=function(e){var t,n=(y.gain(),y.gain(0)),r=y.gain(0),o=y.channelMerger(2);t=y.createNode(),t.nodeType="panner";var i=function(e){return e>1?e=1:e<-1&&(e=-1),e};return t.pan=function(e,t){var o;return c(e)?(e=i(e||0),o=1-(e+1)/2,n.gain(o,t),r.gain(1-o,t),void 0):-(2*(n.gain()-1))-1},t.pan(e||0),y.connect(t.input,[n,r]),y.connect({node:n},{node:o,channel:0}),y.connect({node:r},{node:o,channel:1}),y.connect(o,t.output),t},y.play=function(e,t){t=t||0,n(e)?e.forEach(function(e){e.start(t)}):e.start(t)},y.stop=function(e,t){t=t||0,e.stop(t)},y.reverse=function(e){for(var t=0;t<e.buffer.numberOfChannels;t++)Array.prototype.reverse.call(e.buffer.getChannelData(t));return e};var b=function(e){this.start=function(t){return"undefined"==typeof e.sourceNode.start?e.sourceNode.noteOn(t||y.now()):e.sourceNode.start(t||y.now()),this},this.stop=function(t){return"undefined"==typeof e.sourceNode.stop?e.sourceNode.noteOff(t||y.now()):e.sourceNode.stop(t||y.now()),this}};return y.createNode=function(e){var t={};return e=e||{},t.input=y.context().createGain(),t.output=y.context().createGain(),Object.keys(e).forEach(function(n){t[n]=e[n]}),t.connectedTo=[],e.hasOwnProperty("sourceNode")?b.call(t,e):e.sourceNode=!1,t},y.oscillator=function(e,t){var n,r=y.context().createOscillator();return n=y.createNode({sourceNode:r,nodeType:"oscillator"}),n.frequency=m(r,"frequency"),n.type=m(r,"type"),n.detune=m(r,"detune"),n.params={frequency:r.frequency},n.frequency(e||440),n.type((t||"sine").toLowerCase()),n.isPlaying=function(){return 2===r.playbackState},this.connect(r,n.output),n},y.gain=function(e,t){var n,r;return r="function"==typeof this.context().createGain?this.context().createGain():this.context().createGainNode(),n=y.createNode({nodeType:"gain"}),n.params={gain:r.gain},n.gain=m(r,"gain"),n.gain(e,t),this.connect(n.input,r,n.output),n},y.buffer=function(e,t,n){var r;return e=e||1,t=t||65536,n=n||44100,r=this.context().createBuffer(e,t,n),r.nodeType="buffer",r},y.bufferBox=function(e){var t,n,r,o,i=y.createNode({nodeType:"bufferBox",paused:!1,stopped:!0}),a=0,c=!1;return i.buffer=function(e){return e?void(t=e):t},i.loop=function(e){return c=e,this},e&&i.buffer(e),i.play=function(e){var u=this;n=y.context().createBufferSource(),n.buffer=t,n.loop=c,this.paused=!1,this.stopped=!1,this.playing=!0,y.connect(n,i.output),n.onended=function(){!u.paused&&!u.stopped&&i.position()>=i.buffer().length/y.context().sampleRate&&(a=0,u.stopped=!0,o&&o())},r=y.now(),n.start(y.now(),a)},i.stop=function(e){a=0,this.paused=!1,this.stopped=!0,n&&n.stop(e||y.now())},i.on=function(e,t){"end"===e&&(o=t)},i.pause=function(e){this.paused=!0,n&&(n.stop(e||y.now()),y.disconnect(n)),this.stopped||(a=a+y.now()-r)},i.position=function(e){return e||0===e?void(this.paused||this.stopped?a=e:(this.pause(),a=e,this.play())):this.paused||this.stopped?a:a+y.now()-r},i.start=i.play,i},y.decode=function(e,t,n){this.context().decodeAudioData(e,t,n)},y.filter=function(){var e=y.createNode({type:"filter"}),t={},n=y.context().createBiquadFilter();return a(arguments[0])?(t.type=arguments[0].type,t.frequency=arguments[0].frequency||1e3,t.Q=arguments[0].Q,t.gain=arguments[0].gain):o.isString(arguments[0])&&(t.type=arguments[0]),e.nodeType="filter",e.type=m(n,"type"),e.frequency=m(n,"frequency"),e.Q=m(n,"Q"),e.gain=m(n,"gain"),e.type(t.type||"lowpass"),e.frequency(t.frequency||1e3),e.Q(t.Q||0),e.gain(t.gain||0),this.connect(e.input,n,e.output),e},y.analyser=function(){return this.context().createAnalyser()},y.compressor=function(n){var r=y.createNode({nodeType:"compressor"}),o=this.context().createDynamicsCompressor(),i={threshold:-24,knee:30,ratio:12,attack:.003,release:.25,reduction:0};return n=e(i,n),t(o,n),r.threshold=m(o,"threshold"),r.knee=m(o,"knee"),r.ratio=m(o,"ratio"),r.attack=m(o,"attack"),r.release=m(o,"release"),r.reduction=m(o,"reduction"),this.connect(r.input,o,r.output),r},y.processor=function(e,t){var n=e||1024,r=y.context().createScriptProcessor(n,1,1);return"function"==typeof t&&(r.onaudioprocess=function(e){t(e)}),r},y.waveShaper=function(){for(var e=this.context().createWaveShaper(),t=new Float32Array(65536),n=0;n<32768;n++)n<3e4?t[n]=.1:t[n]=-1;return e.curve=t,e},y.envelope=function(e){var t={};return e=e||{},t.name=e.name||"",t.nodeType="envelope",t.startLevel=e.startLevel||0,t.maxLevel=e.maxLevel||1,t.minLevel=e.minLevel||0,t.param=e.param||null,t.attackTime=e.attack||0,t.decayTime=e.decay||0,t.sustainLevel=e.sustain||1,t.releaseTime=e.release||0,l(e.param)&&(t.param=e.param),t.start=function(e){var t=this.attackTime+this.decayTime;t+this.releaseTime;this.maxLevel=this.startLevel+this.maxLevel,this.sustainLevel=this.startLevel+this.sustainLevel,l(this.param)&&(e=e||y.now(),this.param.setValueAtTime(this.startLevel,e),this.param.linearRampToValueAtTime(this.maxLevel,e+this.attackTime),this.param.setValueAtTime(this.maxLevel,e+this.attackTime),this.param.exponentialRampToValueAtTime(this.sustainLevel,e+t),this.param.setValueAtTime(this.sustainLevel,e+t))},t.release=function(e){var t=this.minLevel;e=e||y.now(),0===this.minLevel&&(t=1e-8),l(this.param)&&(this.param.setValueAtTime(this.sustainLevel,e),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.setValueAtTime(this.minLevel,e+this.releaseTime))},t},y.noise=function(){var e,t=this.buffer(),n=this.bufferBox(),r=t.length;for(e=0;e<r;e++)t.getChannelData(0)[e]=2*Math.random()-1;return n.nodeType="noise",n.buffer(t),n.loop(!0),n},y.lfo=function(e){var t,n=y.oscillator(e||10);return t=y.createNode({sourceNode:n,nodeType:"lfo"}),t.modulate=function(e){u(e)&&(y.connect(n,e),n.start())},t.frequency=n.frequency,t},y.getUserAudio=function(e,t){var n=function(t){var n=y.context().createMediaStreamSource(t);e(n)};navigator.webkitGetUserMedia({audio:!0},n,t)},y.init=function(){w(function(){x()},function(e){console.log(e)})},y}(),"undefined"!=typeof window&&window.document&&r.init(),t.exports=r},{"./helpers":1}],5:[function(e,t,n){"use strict";var r=e("./tsw-core");r.delay=function(e){var t=r.createNode(),n=r.wait(),o=r.gain(),i=r.gain(),a=r.gain();return t.settings={delayTime:.5,feedback:.5,level:.5},e=e||{},n.delayTime.value=e.delayTime||t.settings.delayTime,o.gain.value=e.feedback||t.settings.feedback,i.gain.value=e.level||t.settings.level,r.connect(t.input,a,n,o,n,i,t.output),r.connect(a,n),t},r.distortion=function(e){var t=r.createNode(),n=r.context().createWaveShaper(),o=r.context().createBiquadFilter(),i=r.context().createBiquadFilter();return t.settings={distortionLevel:.5},e=e||{},r.connect(t.input,n,[o,i],t.output),t},r.phaser=function(e){var t=r.createNode(),n=[],o=r.gain(),i=0;for(t.settings={rate:8,depth:.5,feedback:.8},e=e||{},o.gain.value=e.feedback||t.settings.feedback,e.rate=e.rate||t.settings.rate,i=0;i<e.rate;i++)n[i]=r.context().createBiquadFilter(),n[i].type=7,n[i].frequency.value=100*i;for(i=0;i<n.length-1;i++)r.connect(n[i],n[i+1]);return r.connect(t.input,n[n.length-1],o,n[0]),r.connect(n[n.length-1],t.output),t.setCutoff=function(e){for(var t=0;t<n.length;t++)n[t].frequency.value=e},t},r.reverb=function(e){var t=r.context().createConvolver(),n=r.gain(),o={},i={effectLevel:.5,reverbTime:.5,reverbType:"spring",reverbPath:""};return e=e||{},n.gain.value=e.effectLevel||i.effectLevel,r.load({hall:"/effects/reverb/responses/bright-hall.wav",room:"/effects/reverb/responses/medium-room.wav",spring:"/effects/reverb/responses/feedback-spring.wav"},function(e){i.reverbPath=e[i.reverbType],t.buffer=i.reverbPath,o.input=r.gain(),o.output=r.gain(),r.connect(o.input,[o.output,t]),r.connect(t,n),r.connect(n,o.output)}),o},r.tremolo=function(e){var t={},n=(r.gain(),this.lfo()),o=this;return e=e||{},t.input=r.gain(),t.connect=function(e){t.input.connect(e),n.modulate(t.input.gain),n.start(o.now())},t.setRate=function(e){n.frequency(e)},t.setDepth=function(e){n.depth(e)},t},t.exports=r},{"./tsw-core":4}],6:[function(e,t,n){"use strict";var r={};if("undefined"!=typeof URL){var o=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){"start"===e.data&&setInterval(function(){self.postMessage("tick")},25)})}.toString(),")()"],{type:"application/javascript"})),i=new Worker(o);URL.revokeObjectURL(o)}r.secondsPerBeat=function(e){return 60/e},r.loop=function(e,t,n){var o,a,c,u=0,s=.1;t=t||120,n=n||16,a=n/4,c=1/a,o=r.now(),i.postMessage("start"),i.addEventListener("message",function(i){if("tick"===i.data)for(;o<r.now()+s;)e(o,u+1),o+=c*r.secondsPerBeat(t),u++,u===n&&(u=0)})},t.exports=r},{}],7:[function(e,t,n){var r=e("./tsw-core"),o=e("./tsw-effects"),i=e("./tsw-music"),a=e("./tsw-loop"),c=e("./tsw-midi"),u=e("./tsw-analysis"),s={};for(var f in r)s[f]=r[f];for(var f in o)s[f]=o[f];for(var f in i)s[f]=i[f];for(var f in a)s[f]=a[f];for(var f in c)s[f]=c[f];for(var f in u)s[f]=u[f];t.exports=s},{"./tsw-analysis":2,"./tsw-core":4,"./tsw-effects":5,"./tsw-loop":6,"./tsw-midi":8,"./tsw-music":9}],8:[function(e,t,n){"use strict";var r=e("./helpers"),o={},i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a=function(e){for(var t,n=i.length,r=0;r<n;r++)if(e.toUpperCase()===i[r])return t=r,r;return null};o.isMidiSupported=function(){return"function"==typeof navigator.requestMIDIAccess},o.getUserMidi=function(e,t){this.isMidiSupported()&&navigator.requestMIDIAccess().then(e,t)};var c=function(e){var t=e.match(/^[A-g#]+/)[0],n=parseInt(e.match(/\d+/g),10),r=a(t);return r+12*n},u=function(e){var t=e%12,n=Math.floor(e/12),r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return r.push.apply(r,r),r[t]+n};o.midiNote=function(e){return r.isString(e)?c(e):r.isNumber(e)?u(e):void 0},t.exports=o},{"./helpers":1}],9:[function(e,t,n){"use strict";var r={},o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];o.push.apply(o,o);var i=["unison","flat 2nd","2nd","minor 3rd","major 3rd","perfect 4th","flat 5th","perfect 5th","minor 6th","major 6th","minor 7th","major 7th","octave","flat 9th","9th","sharp 9th","major 10th","11th","augmented 11th","perfect 12th","flat 13th","13th"],a=function(e){for(var t,n=o.length,r=0;r<n;r++)if(e.toUpperCase()===o[r])return t=r,r;return null},c=function(e){var t=[],n=a(e);return t.push(o[n]),t.push(o[n+2]),t.push(o[n+4]),t.push(o[n+5]),t.push(o[n+7]),t.push(o[n+9]),t.push(o[n+11]),t.push(o[n+12]),t},u=function(e){var t=[],n=a(e);return t.push(o[n]),t.push(o[n+2]),t.push(o[n+3]),t.push(o[n+5]),t.push(o[n+7]),t.push(o[n+8]),t.push(o[n+10]),t.push(o[n+12]),t},s=function(e){return!("string"!=typeof e||e.length>3)};r.chord=function(e){var t={},n=[],i=0;return!Array.isArray(e)&&(e=e.toLowerCase(),t.rootNote=e[0].toUpperCase(),t.isMajor=e.indexOf("maj")>-1,t.isMinor=!t.isMajor&&e.indexOf("m")>-1,t.is7th=e.indexOf("7")>-1,t.notes=[],t.is7th||(t.octave=e.match(/\d/g)),t.isMajor||t.isMinor||e.is7th||(t.isMajor=!0),i=a(t.rootNote),n.push(i),e.isMinor?n.push(i+r.semitoneDifference("minor 3rd")):n.push(i+r.semitoneDifference("major 3rd")),n.push(i+r.semitoneDifference("perfect 5th")),n.push(i+r.semitoneDifference("octave")),n.forEach(function(e){t.notes.push(o[e])}),t.notes)},r.scale=function(e,t){return"minor"===t?u(e):c(e)},r.semitoneDifference=function(e){for(var t=i.length,n=0;n<t;n++)if(e===i[n])return n},r.flat=function(e){var t;return e=e.replace("#","b"),t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)+1),"H"===t&&(t="A"),t+=e.substr(1)},r.sharp=function(e){var t,n=0;return e.indexOf("b")===-1?e:(e=e.replace("b","#"),t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)-1),"@"===t&&(t="G"),"B"===t&&(n=e.search(/\d/),n>-1&&(e=e.substring(0,n)+(e[n]-1)+e.substring(n+1))),t+=e.substr(1))},r.frequency=function(e){var t,n,r,i;return s(e)!==!1&&(r=e.search(/\d/),t=parseInt(e.slice(-1)),isNaN(t)&&(t=4),e=this.sharp(e),i=e,r>-1&&(i=e.substr(0,r)),n=o.indexOf(i.toUpperCase()),n+=12*t,parseFloat(440*Math.pow(2,(n-57)/12),10))},t.exports=r},{}]},{},[3]);